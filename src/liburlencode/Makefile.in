srcdir = @srcdir@
VPATH = @srcdir@
prefix = @prefix@
exec_prefix = @exec_prefix@

CC = @CC@
INSTALL = @INSTALL@

LIBS = liburlencode.a # liburlencode.so 

all:  $(LIBS)  test-liburlencode

xall:  $(LIBS) liburl++.a test-liburlencode

clean: 
	rm -f $(LIBS) *.o

distclean:
	rm -f Makefile *~

install:
	$(INSTALL)  -m 644 liburlencode.a @libdir@/liburlencode.a

uninstall:
	rm -f @libdir@/liburlencode.a

tags:
	etags -a -o ../TAGS *.c *.h

CFLAGS=-g -Wall -I../include

COBJS=urlencoded.o urlfieldlist.o urlmap.o

liburlencode.a: $(COBJS)
	ar qcs $@ $(COBJS)

liburlencode.so:
	$(CC) -shared -o $@ $(COBJS)

test-liburlencode: liburlencode.a test-liburlencode.o
	$(CC) -o $@ test-liburlencode.o -L. -lurlencode

urlencoded.o: urlencoded.c ../include/urlencode.h

urlmap.o: urlmap.c ../include/urlencode.h

urlfieldlist.o: urlfieldlist.c ../include/urlencode.h

liburl++.a: urlencoded++.o
	ar qcs $@ urlencoded++.o

urlencoded++.o: urlencoded.c
	$(CC) -xc++ -c -g -o $@ urlencoded.c

